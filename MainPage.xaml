<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ChipControl="clr-namespace:Syncfusion.Maui.Toolkit.Chips;assembly=Syncfusion.Maui.Toolkit"
             xmlns:local="clr-namespace:VACalculatorApp"
             x:Class="VACalculatorApp.MainPage"
             Title="VA Disability Calculator">
    <ContentPage.BindingContext>
        <local:PercentagesViewModel/>
    </ContentPage.BindingContext>

    <ScrollView>
        <VerticalStackLayout Spacing="25" Padding="20">
            
            <Label Text="VA Disability Calculator" 
                   FontSize="28" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center" />
            
            <!-- Dependent Information -->
            <Frame BorderColor="LightGray" CornerRadius="8" Padding="15" HasShadow="True">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Dependent Information" FontSize="20" FontAttributes="Bold"/>
                    
                    <!-- Married Toggle -->
                    <HorizontalStackLayout Spacing="15">
                        <Label Text="Married:" VerticalOptions="Center" WidthRequest="200"/>
                        <Switch x:Name="MarriedSwitch" 
                                OnColor="#0078D7"
                                Toggled="MarriedSwitch_Toggled"/>

                    </HorizontalStackLayout>
                    
                    <!-- Parents Dropdown -->
                    <HorizontalStackLayout Spacing="15">
                        <Label Text="Parents:" VerticalOptions="Center" WidthRequest="200"/>
                        <Picker x:Name="ParentsPicker"
                                WidthRequest="150"
                                SelectedIndexChanged="DependentPicker_Changed">
                            <Picker.Items>
                                <x:String>0</x:String>
                                <x:String>1</x:String>
                                <x:String>2</x:String>
                            </Picker.Items>
                        </Picker>
                    </HorizontalStackLayout>
                    
                    <!-- Children Under 18 Dropdown -->
                    <HorizontalStackLayout Spacing="15">
                        <Label Text="Children Under 18:" VerticalOptions="Center" WidthRequest="200"/>
                        <Picker x:Name="ChildrenUnder18Picker"
                                WidthRequest="150"
                                SelectedIndexChanged="DependentPicker_Changed">
                            <Picker.Items>
                                <x:String>0</x:String>
                                <x:String>1</x:String>
                                <x:String>2</x:String>
                                <x:String>3</x:String>
                                <x:String>4</x:String>
                                <x:String>5</x:String>
                                <x:String>6</x:String>
                                <x:String>7</x:String>
                                <x:String>8</x:String>
                                <x:String>9</x:String>
                            </Picker.Items>
                        </Picker>
                    </HorizontalStackLayout>
                    
                    <!-- Children Over 18 in School Dropdown -->
                    <HorizontalStackLayout Spacing="15">
                        <Label Text="Children Over 18 in School:" VerticalOptions="Center" WidthRequest="200"/>
                        <Picker x:Name="ChildrenOver18Picker"
                                WidthRequest="150"
                                SelectedIndexChanged="DependentPicker_Changed">
                            <Picker.Items>
                                <x:String>0</x:String>
                                <x:String>1</x:String>
                                <x:String>2</x:String>
                                <x:String>3</x:String>
                                <x:String>4</x:String>
                                <x:String>5</x:String>
                                <x:String>6</x:String>
                                <x:String>7</x:String>
                                <x:String>8</x:String>
                                <x:String>9</x:String>
                            </Picker.Items>
                        </Picker>
                    </HorizontalStackLayout>
                    <Button Text="Clear Dependent Information" 
                            Clicked="ClearDependents_Clicked"
                            BackgroundColor="#FF5252"
                            TextColor="White"
                            CornerRadius="8"
                            Margin="0,10,0,0"/>
                </VerticalStackLayout>
            </Frame>
            <!-- TODO Add an SfLinearGauge -->
            <!-- Disability Percentage Buttons -->
            <Frame BorderColor="LightGray" CornerRadius="8" Padding="15" HasShadow="True">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Add Disability Percentages" FontSize="20" FontAttributes="Bold"/>
                    <Label Text="Tap percentages to add to your calculation" FontSize="14"/>
                    
                    <!-- Buttons Grid for percentages 10-100 -->
                    <Grid ColumnDefinitions="*, *, *, *, *" 
                          RowDefinitions="Auto, Auto"
                          ColumnSpacing="8"
                          RowSpacing="8">
                        
                        <!-- First row: 10-50% -->
                        <Button Text="10%" 
                                Grid.Row="0" Grid.Column="0"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="10"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                FontFamily="sans-serif"
                                CornerRadius="8"/>
                                
                        <Button Text="20%" 
                                Grid.Row="0" Grid.Column="1"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="20"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                FontFamily="sans-serif"
                                CornerRadius="8"
                                />
                                
                        <Button Text="30%" 
                                Grid.Row="0" Grid.Column="2"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="30"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                FontFamily="sans-serif"
                                CornerRadius="8"/>
                                
                        <Button Text="40%" 
                                Grid.Row="0" Grid.Column="3"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="40"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                FontFamily="sans-serif"
                                CornerRadius="8"/>
                                
                        <Button Text="50%" 
                                Grid.Row="0" Grid.Column="4"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="50"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                FontFamily="sans-serif"
                                CornerRadius="8"/>
                                
                        <!-- Second row: 60-100% -->
                        <Button Text="60%" 
                                Grid.Row="1" Grid.Column="0"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="60"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                FontFamily="sans-serif"
                                CornerRadius="8"/>
                                
                        <Button Text="70%" 
                                Grid.Row="1" Grid.Column="1"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="70"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                FontFamily="sans-serif"
                                BorderWidth="2"
                                CornerRadius="8"/>
                                
                        <Button Text="80%" 
                                Grid.Row="1" Grid.Column="2"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="80"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                FontFamily="sans-serif"
                                CornerRadius="8"/>
                                
                        <Button Text="90%" 
                                Grid.Row="1" Grid.Column="3"
                                Clicked="PercentageButton_Clicked"
                                CommandParameter="90"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                CornerRadius="8"
                                FontFamily="sans-serif"/>
                                
                        <Button Text="100%" 
                                Grid.Row="1" Grid.Column="4"
                                Clicked="PercentageButton_Clicked"
                                HorizontalOptions="Fill"
                                CommandParameter="100"
                                BackgroundColor="#0078D7"
                                FontSize="16"
                                FontAttributes="Bold"
                                BorderColor="WhiteSmoke"
                                BorderWidth="2"
                                Padding="0"
                                CornerRadius="8"
                                FontFamily="sans-serif"/>
                    </Grid>
                    
                    <!-- Selected Percentages Display -->
                    <VerticalStackLayout Spacing="10" Margin="0,15,0,0">
                        <Label Text="Selected Ratings:" 
                               FontSize="16" 
                               TextColor= "Black"
                               FontAttributes="Bold"/>
                        <ChipControl:SfChipGroup 
                            x:Name="SfChipGroupPercentsContainer"
                            DisplayMemberPath="Display"
                            ItemsSource="{Binding Percents}"
                            ItemRemoved="SfChipGroupPercentsContainer_OnItemRemoved"
                            ChipType="Filter">
                        </ChipControl:SfChipGroup>
                        
                        <Label x:Name="EmptyPercentagesLabel" 
                               Text="No percentages added yet"
                               IsVisible="True"/>
                    </VerticalStackLayout>
                    
                    <!-- Clear All Button -->
                    <Button Text="Clear All Percentages" 
                            Clicked="ClearPercentages_Clicked"
                            BackgroundColor="#FF5252"
                            TextColor="White"
                            CornerRadius="8"
                            Margin="0,10,0,0"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Results Section -->
            <Frame BorderColor="LightGray" CornerRadius="8" Padding="15" HasShadow="True">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Results" FontSize="20" FontAttributes="Bold"/>
                    
                    <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto" ColumnSpacing="15" RowSpacing="15">
                        <!-- Combined Rating -->
                        <Label Text="Combined Rating:" 
                               Grid.Row="0" Grid.Column="0"
                               FontSize="16"
                               VerticalOptions="Center"/>
                        <Label x:Name="CombinedRatingLabel" 
                               Text="--%" 
                               Grid.Row="0" Grid.Column="1"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor= "Chartreuse"
                               VerticalOptions="Center"/>
                               
                        <!-- Compensation Amount -->
                        <Label Text="Monthly Compensation:" 
                               Grid.Row="1" Grid.Column="0"
                               FontSize="16"
                               VerticalOptions="Center"/>
                        <Label x:Name="CompensationLabel" 
                               Text="$0.00" 
                               Grid.Row="1" Grid.Column="1"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor = "Chartreuse"
                               VerticalOptions="Center"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>
            <Button Text="Knight's Tour Game" 
                    Clicked="NavigateToKnightTour_Clicked"
                    BackgroundColor="Chocolate"
                    TextColor="WhiteSmoke"
                    CornerRadius="8"
                    Margin="0,20,0,0"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>